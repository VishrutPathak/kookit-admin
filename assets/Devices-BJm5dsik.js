import{r as d,l as m,j as e,s as h,c as p}from"./index-4xmnvLmg.js";import{d as l}from"./devices-Cn1jdZhv.js";import{u as D}from"./users-DNrr3Qg9.js";function g(){const[n,i]=d.useState([]),[u,x]=d.useState([]);d.useEffect(()=>{const s=m("kookit_devices",null),t=m("kookit_users",null);i(s?.devices??l.devices),x(t?.users??D.users)},[]);const r=s=>{i(s),h("kookit_devices",{devices:s})},j=()=>{const s=prompt("Device name");if(!s)return;const t=prompt("date sold (YYYY-MM-DD)",new Date().toISOString().slice(0,10)),c={id:p("d"),name:s,dateSold:t,primaryUserId:null,secondaryUserId:null,status:"active"};r([c,...n])},v=s=>{confirm("Delete device?")&&r(n.filter(t=>t.id!==s))},b=s=>{const t=prompt("Primary user id (e.g. u1001)");if(!t)return;const c=n.map(a=>a.id===s?{...a,primaryUserId:t}:a);r(c)},o=s=>u.find(t=>t.id===s)?.name??(s?`Unknown (${s})`:"-");return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h3",{children:"Devices"}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-primary me-2",onClick:j,children:"Add Device"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{h("kookit_devices",{devices:l.devices}),i(l.devices)},children:"Reset"})]})]}),e.jsx("div",{className:"card shadow-sm",children:e.jsx("div",{className:"card-body table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Date Sold"}),e.jsx("th",{children:"Primary User"}),e.jsx("th",{children:"Secondary User"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsxs("tbody",{children:[n.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:new Date(s.dateSold).toLocaleDateString()}),e.jsx("td",{children:o(s.primaryUserId)}),e.jsx("td",{children:o(s.secondaryUserId)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.status==="active"?"bg-success":"bg-secondary"}`,children:s.status})}),e.jsxs("td",{className:"text-end",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary me-1",onClick:()=>b(s.id),children:"Assign primary"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>v(s.id),children:"Delete"})]})]},s.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-muted",children:"No devices"})})]})]})})})]})}export{g as default};
